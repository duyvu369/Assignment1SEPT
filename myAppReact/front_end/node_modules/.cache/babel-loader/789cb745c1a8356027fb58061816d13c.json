{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';var Bookings=/*#__PURE__*/function(_Component){_inherits(Bookings,_Component);var _super=_createSuper(Bookings);function Bookings(){var _this;_classCallCheck(this,Bookings);_this=_super.call(this);_this.state={items:[],loggedIn:false,token:'',position:\"\",date:\"\",status:\"\",doctor:\"\",doctorContact:\"\",bId:\"\",bookingStatus:\"\",msg:\"\"};_this.handleFilterByStatus=_this.handleFilterByStatus.bind(_assertThisInitialized(_this));_this.handleFilterByDate=_this.handleFilterByDate.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleAssign=_this.handleAssign.bind(_assertThisInitialized(_this));return _this;}_createClass(Bookings,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Get the log in status and the current user\naxios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status').then(function(response){_this2.setState({loggedIn:response.data.loggedIn,token:response.data.token});console.log(_this2.state);//Get the booking history of the user\naxios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings',{headers:{'Authorization':\"\".concat(_this2.state.token)}}).then(function(response){_this2.setState({items:response.data.appointmentList});console.log(_this2.state);//Get the position of the user\naxios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account',{headers:{'Authorization':\"\".concat(_this2.state.token)}}).then(function(response){_this2.setState({position:response.data.accountInfo.position});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});}},{key:\"handleChange\",value:function handleChange(event){this.setState({[event.target.name]:event.target.value});}//Filter by date for manager\n},{key:\"handleFilterByDate\",value:function handleFilterByDate(event){var _this3=this;var _this$state=this.state,token=_this$state.token,date=_this$state.date;axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date',{date:date},{headers:{\"Authorization\":\"\".concat(token)}}).then(function(res){console.log(res.data);_this3.setState({items:res.data.bookingsList});}).catch(function(error){console.log(error);_this3.setState({msg:\"Something went wrong! please try again!\"});});event.preventDefault();}},{key:\"handleFilterByStatus\",value:function handleFilterByStatus(event){var _this4=this;var _this$state2=this.state,token=_this$state2.token,status=_this$state2.status;axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status',{status:status},{headers:{\"Authorization\":\"\".concat(token)}}).then(function(res){console.log(res.data);_this4.setState({items:res.data.bookingsList});}).catch(function(error){console.log(error);_this4.setState({msg:\"Something went wrong! please try again!\"});});event.preventDefault();}},{key:\"handleAssign\",value:function handleAssign(event){var _this5=this;var _this$state3=this.state,bId=_this$state3.bId,bookingStatus=_this$state3.bookingStatus,doctor=_this$state3.doctor,doctorContact=_this$state3.doctorContact;axios.put('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Booking',{doctor:doctor,doctorContact:doctorContact,status:bookingStatus},{params:{bId:bId},headers:{'Authorization':\"\".concat(this.state.token)}}).then(function(res){_this5.setState({msg:res.data.message});});event.preventDefault();}},{key:\"render\",value:function render(){var _this6=this;var _this$state4=this.state,loggedIn=_this$state4.loggedIn,items=_this$state4.items,position=_this$state4.position;//If there is no booking  in booking  history, show a message\nif(loggedIn&&items.length==0){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Your booking history is empty!\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"You can book an appointment in Book\"));}else{//If the user is a manager, show the filters\nif(position===\"Manager\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Your appointment history:\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleFilterByDate},\"Filter by date:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"date\",placeholder:\"DD/MM/YYYY\",value:this.state.date,onChange:this.handleChange}),\" \",/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Search\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleFilterByStatus},\"Filter by status:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"status\",placeholder:\"Accepted/Declined/Pending\",value:this.state.status,onChange:this.handleChange}),\" \",/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Assign Form\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleAssign},\"Appointment ID:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"bId\",onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),\"Status:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"bookingStatus\",value:this.state.bookingStatus,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),\"Doctor:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"doctor\",value:this.state.doctor,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),\"Doctor contact info:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"doctorContact\",value:this.state.doctorContact,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Assign\")),items.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\",key:item.bId},/*#__PURE__*/React.createElement(\"h3\",null,\"Service: \",item.service),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"ID: \",item.bId),/*#__PURE__*/React.createElement(\"li\",null,\"Time: \",item.time,\" \",item.date),/*#__PURE__*/React.createElement(\"li\",null,\"Status: \",item.status),/*#__PURE__*/React.createElement(\"li\",null,\"Doctor: \",item.doctor),/*#__PURE__*/React.createElement(\"li\",null,\"Base fee: \",item.baseFee,\" VND\"),/*#__PURE__*/React.createElement(\"li\",null,\"Doctor contact: \",item.doctorContact)));}),/*#__PURE__*/React.createElement(\"h3\",null,this.state.msg)));}else{return/*#__PURE__*/React.createElement(\"div\",null,items.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\",key:item.bId},/*#__PURE__*/React.createElement(\"h3\",null,\"Service: \",item.service),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Time: \",item.time,\" \",item.date),/*#__PURE__*/React.createElement(\"li\",null,\"Status: \",item.status),/*#__PURE__*/React.createElement(\"li\",null,\"Doctor: \",item.doctor),/*#__PURE__*/React.createElement(\"li\",null,\"Base fee: \",item.baseFee,\" VND \"),/*#__PURE__*/React.createElement(\"li\",null,\"Doctor contact: \",item.doctorContact)),/*#__PURE__*/React.createElement(\"h3\",null,_this6.state.msg));}));}}}}]);return Bookings;}(Component);export default Bookings;","map":{"version":3,"sources":["C:/Users/VUTRANG COMPUTER/Desktop/onlineHospitalApp/Assignment1SEPT/myAppReact/front_end/src/page/Bookings.js"],"names":["React","Component","axios","Bookings","state","items","loggedIn","token","position","date","status","doctor","doctorContact","bId","bookingStatus","msg","handleFilterByStatus","bind","handleFilterByDate","handleChange","handleAssign","get","then","response","setState","data","console","log","headers","appointmentList","accountInfo","catch","error","event","target","name","value","post","res","bookingsList","preventDefault","put","params","message","length","map","item","service","time","baseFee"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\nclass Bookings extends Component {\r\n    \r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            items: [],\r\n            loggedIn:false,\r\n            token:'',\r\n            position:\"\",\r\n            date:\"\",\r\n            status:\"\",\r\n            doctor:\"\",\r\n            doctorContact:\"\",\r\n            bId:\"\",\r\n            bookingStatus:\"\",\r\n            msg:\"\"\r\n        }\r\n    this.handleFilterByStatus = this.handleFilterByStatus.bind(this)\r\n    this.handleFilterByDate = this.handleFilterByDate.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleAssign = this.handleAssign.bind(this)\r\n    }\r\n    \r\n    componentDidMount(){\r\n    //Get the log in status and the current user\r\n    axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status')\r\n    .then(response=> {\r\n        this.setState({\r\n            loggedIn:response.data.loggedIn,\r\n            token:response.data.token\r\n        })\r\n        console.log(this.state)\r\n        //Get the booking history of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n    \r\n        this.setState({\r\n            items: response.data.appointmentList\r\n        })\r\n        console.log(this.state)\r\n        //Get the position of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n        this.setState({\r\n            position:response.data.accountInfo.position\r\n        })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    }\r\n\r\n    handleChange(event) {\r\n    this.setState({\r\n        [event.target.name]: event.target.value\r\n    })\r\n    }\r\n    //Filter by date for manager\r\n    handleFilterByDate(event) {\r\n        const { token, date} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date', {\r\n          date:date\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleFilterByStatus(event) {\r\n        const { token, status} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status', {\r\n          status:status\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleAssign(event){\r\n        const {bId,bookingStatus,doctor,doctorContact} = this.state\r\n        axios.put('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Booking',{\r\n          doctor:doctor,doctorContact:doctorContact, status:bookingStatus\r\n        },{\r\n          params:{\r\n            bId:bId\r\n          },\r\n          headers:{\r\n            'Authorization':`${this.state.token}`\r\n          }\r\n        }).then(res=>{\r\n          this.setState({\r\n            msg:res.data.message})\r\n        })\r\n        event.preventDefault()\r\n      }\r\n    render() {\r\n        \r\n        var {loggedIn, items,position} = this.state  \r\n        //If there is no booking  in booking  history, show a message\r\n        if(loggedIn&&items.length==0){\r\n            return <div><h3>Your booking history is empty!</h3>\r\n            <br></br>\r\n            <h3>You can book an appointment in Book</h3></div>\r\n        }\r\n        else {\r\n            //If the user is a manager, show the filters\r\n            if(position===\"Manager\"){return <div>\r\n                <h3>Your appointment history:</h3>\r\n                    <form onSubmit={this.handleFilterByDate} >\r\n\r\n                    Filter by date: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"date\"\r\n                    placeholder=\"DD/MM/YYYY\"\r\n                    value={this.state.date}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n                    <form onSubmit={this.handleFilterByStatus} >\r\n\r\n                    Filter by status: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"status\"\r\n                    placeholder=\"Accepted/Declined/Pending\"\r\n                    value={this.state.status}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n\r\n                    <ul>\r\n                      <h3>Assign Form</h3>\r\n                    <form onSubmit={this.handleAssign} >\r\n\r\n                    Appointment ID:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"bId\"\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Status:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"bookingStatus\"\r\n                    value={this.state.bookingStatus}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctor\"\r\n                    value={this.state.doctor}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor contact info:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctorContact\"\r\n                    value={this.state.doctorContact}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <button type=\"submit\">Assign</button>\r\n                    </form>\r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>\r\n                      \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                    <li>ID: {item.bId}</li>  \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee} VND</li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    \r\n                    </ul>\r\n                      \r\n                    </div>  \r\n                    ))}\r\n                    <h3>{this.state.msg}</h3>  \r\n                    </ul>\r\n            </div>} else{\r\n                return <div>\r\n                    \r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>  \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                      \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee} VND </li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    </ul>\r\n                \r\n                    <h3>{this.state.msg}</h3> \r\n                </div>\r\n                  ))}\r\n                </div>\r\n\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n}\r\nexport default Bookings\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\src\\\\page\\\\Bookings.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar Bookings = /*#__PURE__*/function (_Component) {\n  _inherits(Bookings, _Component);\n\n  var _super = _createSuper(Bookings);\n\n  function Bookings() {\n    var _this;\n\n    _classCallCheck(this, Bookings);\n\n    _this = _super.call(this);\n    _this.state = {\n      items: [],\n      loggedIn: false,\n      token: '',\n      position: \"\",\n      date: \"\",\n      status: \"\"\n    };\n    _this.handleFilterByStatus = _this.handleFilterByStatus.bind(_assertThisInitialized(_this));\n    _this.handleFilterByDate = _this.handleFilterByDate.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Bookings, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //Get the log in status and the current user\n      axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status').then(function (response) {\n        _this2.setState({\n          loggedIn: response.data.loggedIn,\n          token: response.data.token\n        });\n\n        console.log(_this2.state); //Get the booking history of the user\n\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings', {\n          headers: {\n            'Authorization': \"\".concat(_this2.state.token)\n          }\n        }).then(function (response) {\n          _this2.setState({\n            items: response.data\n          });\n\n          console.log(_this2.state); //Get the position of the user\n\n          axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account', {\n            headers: {\n              'Authorization': \"\".concat(_this2.state.token)\n            }\n          }).then(function (response) {\n            _this2.setState({\n              position: response.data.accountInfo.position\n            });\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    } //Filter by date for manager\n\n  }, {\n    key: \"handleFilterByDate\",\n    value: function handleFilterByDate(event) {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          token = _this$state.token,\n          date = _this$state.date;\n      axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date', {\n        date: date\n      }, {\n        headers: {\n          \"Authorization\": \"\".concat(token)\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        _this3.setState({\n          items: res.data.bookingsList\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this3.setState({\n          msg: \"Something went wrong! please try again!\"\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleFilterByStatus\",\n    value: function handleFilterByStatus(event) {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          token = _this$state2.token,\n          status = _this$state2.status;\n      axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status', {\n        status: status\n      }, {\n        headers: {\n          \"Authorization\": \"\".concat(token)\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        _this4.setState({\n          items: res.data.bookingsList\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this4.setState({\n          msg: \"Something went wrong! please try again!\"\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleAssign\",\n    value: function handleAssign(event) {\n      event.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$state3 = this.state,\n          loggedIn = _this$state3.loggedIn,\n          items = _this$state3.items,\n          position = _this$state3.position; //If there is no booking  in booking  history, show a message\n\n      if (loggedIn && items.length == 0) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }\n        }, \"Your booking history is empty!\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }\n        }, \"You can book an appointment in Book\"));\n      } else {\n        //If the user is a manager, show the filters\n        if (position === \"Manager\") {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"h3\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }\n          }, \"Your appointment history:\"), /*#__PURE__*/React.createElement(\"form\", {\n            onSubmit: this.handleFilterByDate,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 21\n            }\n          }, \"Filter by date:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"date\",\n            placeholder: \"DD/MM/YYYY\",\n            value: this.state.date,\n            onChange: this.handleChange,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 21\n            }\n          }), \" \", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"submit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 24\n            }\n          }, \"Search\")), /*#__PURE__*/React.createElement(\"form\", {\n            onSubmit: this.handleFilterByStatus,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 21\n            }\n          }, \"Filter by status:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"status\",\n            placeholder: \"Accepted/Declined/Pending\",\n            value: this.state.status,\n            onChange: this.handleChange,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 21\n            }\n          }), \" \", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"submit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 24\n            }\n          }, \"Search\")), /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 21\n            }\n          }, items.map(function (item) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"card\",\n              key: item.bId,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }\n            }, \"Service: \", item.service), /*#__PURE__*/React.createElement(\"ul\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }\n            }, \"ID: \", item.bId), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 21\n              }\n            }, \"Time: \", item.time, \" \", item.date), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }\n            }, \"Status: \", item.status), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 21\n              }\n            }, \"Doctor: \", item.doctor), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 21\n              }\n            }, \"Base fee: \", item.baseFee), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 21\n              }\n            }, \"Doctor contact: \", item.doctorContact), /*#__PURE__*/React.createElement(\"form\", {\n              onSubmit: _this5.handleFilterByDate,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }\n            }, \"Appointment ID:\", /*#__PURE__*/React.createElement(\"input\", {\n              type: \"text\",\n              name: \"bId\",\n              value: _this5.state.bId,\n              onChange: _this5.handleChange,\n              required: true,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 21\n              }\n            }), \"Status:\", /*#__PURE__*/React.createElement(\"input\", {\n              type: \"text\",\n              name: \"status\",\n              placeholder: _this5.state.status,\n              value: _this5.state.status,\n              onChange: _this5.handleChange,\n              required: true,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 21\n              }\n            }), /*#__PURE__*/React.createElement(\"br\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 21\n              }\n            }), \"Doctor:\", /*#__PURE__*/React.createElement(\"input\", {\n              type: \"text\",\n              name: \"doctor\",\n              placeholder: _this5.state.doctor,\n              value: _this5.state.doctor,\n              onChange: _this5.handleChange,\n              required: true,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 21\n              }\n            }), /*#__PURE__*/React.createElement(\"br\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }\n            }), \"Doctor contact info:\", /*#__PURE__*/React.createElement(\"input\", {\n              type: \"text\",\n              name: \"doctorContact\",\n              placeholder: _this5.state.doctorContact,\n              value: _this5.state.doctorContact,\n              onChange: _this5.handleChange,\n              required: true,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }\n            }), /*#__PURE__*/React.createElement(\"button\", {\n              type: \"submit\",\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 21\n              }\n            }, \"Assign\"))), /*#__PURE__*/React.createElement(\"p\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }\n            }, item.msg));\n          })));\n        } else {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 24\n            }\n          }, items.map(function (item) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"card\",\n              key: item.bId,\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 21\n              }\n            }, \"Service: \", item.service), /*#__PURE__*/React.createElement(\"ul\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 21\n              }\n            }, \"Time: \", item.time, \" \", item.date), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }\n            }, \"Status: \", item.status), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }\n            }, \"Doctor: \", item.doctor), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }\n            }, \"Base fee: \", item.baseFee), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }\n            }, \"Doctor contact: \", item.doctorContact)), /*#__PURE__*/React.createElement(\"p\", {\n              __self: _this5,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }\n            }, item.msg));\n          }));\n        }\n      }\n    }\n  }]);\n\n  return Bookings;\n}(Component);\n\nexport default Bookings;","map":{"version":3,"sources":["C:/Users/VUTRANG COMPUTER/Desktop/onlineHospitalApp/Assignment1SEPT/myAppReact/front_end/src/page/Bookings.js"],"names":["React","Component","axios","Bookings","state","items","loggedIn","token","position","date","status","handleFilterByStatus","bind","handleFilterByDate","handleChange","get","then","response","setState","data","console","log","headers","accountInfo","catch","error","event","target","name","value","post","res","bookingsList","msg","preventDefault","length","map","item","bId","service","time","doctor","baseFee","doctorContact"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\nclass Bookings extends Component {\r\n    \r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            items: [],\r\n            loggedIn:false,\r\n            token:'',\r\n            position:\"\",\r\n            date:\"\",\r\n            status:\"\"\r\n        }\r\n    this.handleFilterByStatus = this.handleFilterByStatus.bind(this)\r\n    this.handleFilterByDate = this.handleFilterByDate.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n    }\r\n    \r\n    componentDidMount(){\r\n    //Get the log in status and the current user\r\n    axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status')\r\n    .then(response=> {\r\n        this.setState({\r\n            loggedIn:response.data.loggedIn,\r\n            token:response.data.token\r\n        })\r\n        console.log(this.state)\r\n        //Get the booking history of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n    \r\n        this.setState({\r\n            items: response.data\r\n        })\r\n        console.log(this.state)\r\n        //Get the position of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n        this.setState({\r\n            position:response.data.accountInfo.position\r\n        })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    }\r\n\r\n    handleChange(event) {\r\n    this.setState({\r\n        [event.target.name]: event.target.value\r\n    })\r\n    }\r\n    //Filter by date for manager\r\n    handleFilterByDate(event) {\r\n        const { token, date} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date', {\r\n          date:date\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleFilterByStatus(event) {\r\n        const { token, status} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status', {\r\n          status:status\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleAssign(event){\r\n        event.preventDefault()\r\n      }\r\n    render() {\r\n        \r\n        var {loggedIn, items,position} = this.state  \r\n        //If there is no booking  in booking  history, show a message\r\n        if(loggedIn&&items.length==0){\r\n            return <div><h3>Your booking history is empty!</h3>\r\n            <br></br>\r\n            <h3>You can book an appointment in Book</h3></div>\r\n        }\r\n        else {\r\n            //If the user is a manager, show the filters\r\n            if(position===\"Manager\"){return <div>\r\n                <h3>Your appointment history:</h3>\r\n                    <form onSubmit={this.handleFilterByDate} >\r\n\r\n                    Filter by date: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"date\"\r\n                    placeholder=\"DD/MM/YYYY\"\r\n                    value={this.state.date}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n                    <form onSubmit={this.handleFilterByStatus} >\r\n\r\n                    Filter by status: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"status\"\r\n                    placeholder=\"Accepted/Declined/Pending\"\r\n                    value={this.state.status}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n                    <ul>\r\n                    \r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>\r\n                      \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                    <li>ID: {item.bId}</li>  \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee}</li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    <form onSubmit={this.handleFilterByDate} >\r\n\r\n                    Appointment ID:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"bId\"\r\n                    value={this.state.bId}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    Status:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"status\"\r\n                    placeholder={this.state.status}\r\n                    value={this.state.status}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctor\"\r\n                    placeholder={this.state.doctor}\r\n                    value={this.state.doctor}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor contact info:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctorContact\"\r\n                    placeholder={this.state.doctorContact}\r\n                    value={this.state.doctorContact}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <button type=\"submit\">Assign</button>\r\n                    </form>\r\n                    </ul>\r\n                \r\n                    <p>{item.msg}</p>    \r\n                    </div>  \r\n                    ))}\r\n                    \r\n                    </ul>\r\n            </div>} else{\r\n                return <div>\r\n                    \r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>  \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                      \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee}</li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    </ul>\r\n                \r\n                    <p>{item.msg}</p> \r\n                </div>\r\n                  ))}\r\n                </div>\r\n\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n}\r\nexport default Bookings\r\n"]},"metadata":{},"sourceType":"module"}
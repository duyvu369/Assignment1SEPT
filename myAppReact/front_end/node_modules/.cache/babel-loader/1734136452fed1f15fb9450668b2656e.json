{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';var Feedback=/*#__PURE__*/function(_Component){_inherits(Feedback,_Component);var _super=_createSuper(Feedback);function Feedback(){var _this;_classCallCheck(this,Feedback);_this=_super.call(this);_this.state={items:[],loggedIn:false,token:'',context:\"\",rating:\"\",msg:\"\"};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Feedback,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Get the log in status and the current user\naxios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status').then(function(response){_this2.setState({loggedIn:response.data.loggedIn,token:response.data.token});console.log(_this2.state);//Load all the feedbacks\naxios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Feedbacks',{headers:{'Authorization':\"\".concat(_this2.state.token)}}).then(function(response){_this2.setState({items:response.data.feedbacks});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});}},{key:\"handleChange\",value:function handleChange(event){this.setState({[event.target.name]:event.target.value});}//Filter by date for manager\n},{key:\"handleSubmit\",value:function handleSubmit(event){var _this3=this;var _this$state=this.state,token=_this$state.token,context=_this$state.context,rating=_this$state.rating;axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Feedback',{context:context,rating:rating},{headers:{\"Authorization\":\"\".concat(token)}}).then(function(res){console.log(res.data);_this3.setState({msg:res.data.message});}).catch(function(error){console.log(error);_this3.setState({msg:\"Something went wrong! please try again!\"});});}},{key:\"render\",value:function render(){var _this$state2=this.state,loggedIn=_this$state2.loggedIn,items=_this$state2.items,msg=_this$state2.msg;//If there is no booking  in booking  history, show a message\n//If the user is a manager, show the filters\nif(loggedIn){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"New feeback\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},\"Context\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"context\",placeholder:\"Feedback detail!\",value:this.state.context,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),\"Rating:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"rating\",placeholder:\"Please rate our service!\",value:this.state.rating,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Submit feedback\")),\"Feedbacks:\",items.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\",key:item.fId},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Context: \",item.context),/*#__PURE__*/React.createElement(\"li\",null,\"Rating: \",item.rating),/*#__PURE__*/React.createElement(\"li\",null,\" Submitted by: \",item.name)));}),/*#__PURE__*/React.createElement(\"h3\",null,msg));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Feedbacks:\"),items.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\",key:item.fId},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Context: \",item.context),/*#__PURE__*/React.createElement(\"li\",null,\"Rating: \",item.rating),/*#__PURE__*/React.createElement(\"li\",null,\" Submitted by: \",item.name)));}),/*#__PURE__*/React.createElement(\"h3\",null,this.state.msg));}}}]);return Feedback;}(Component);export default Feedback;","map":{"version":3,"sources":["C:/Users/VUTRANG COMPUTER/Desktop/onlineHospitalApp/Assignment1SEPT/myAppReact/front_end/src/page/Feedback.js"],"names":["React","Component","axios","Feedback","state","items","loggedIn","token","context","rating","msg","handleChange","bind","handleSubmit","get","then","response","setState","data","console","log","headers","feedbacks","catch","error","event","target","name","value","post","res","message","map","item","fId"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\nclass Feedback extends Component {\r\n     \r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            items: [],\r\n            loggedIn:false,\r\n            token:'',\r\n            context:\"\",\r\n            rating:\"\",\r\n            msg:\"\"\r\n        }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSubmit= this.handleSubmit.bind(this)\r\n    }\r\n    \r\n    componentDidMount(){\r\n    //Get the log in status and the current user\r\n    axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status')\r\n    .then(response=> {\r\n        this.setState({\r\n            loggedIn:response.data.loggedIn,\r\n            token:response.data.token\r\n        })\r\n        console.log(this.state)\r\n        //Load all the feedbacks\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Feedbacks',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n    \r\n        this.setState({\r\n            items: response.data.feedbacks\r\n        })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    }\r\n\r\n    handleChange(event) {\r\n    this.setState({\r\n        [event.target.name]: event.target.value\r\n    })\r\n    }\r\n    //Filter by date for manager\r\n    handleSubmit(event) {\r\n        const { token, context, rating} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Feedback', {\r\n          context:context,\r\n          rating:rating\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                msg: res.data.message\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n      }\r\n\r\n    render() {\r\n        \r\n        var {loggedIn, items,msg} = this.state  \r\n        //If there is no booking  in booking  history, show a message\r\n            //If the user is a manager, show the filters\r\n            if(loggedIn){return <div>\r\n                <h3>New feeback</h3>\r\n                    <form onSubmit={this.handleSubmit} >\r\n\r\n                    Context\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"context\"\r\n                    placeholder=\"Feedback detail!\"\r\n                    value={this.state.context}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Rating:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"rating\"\r\n                    placeholder=\"Please rate our service!\"\r\n                    value={this.state.rating}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <button type=\"submit\">Submit feedback</button>\r\n                    </form>\r\n                    Feedbacks:\r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.fId}>\r\n                    <ul>\r\n                    <li>Context: {item.context}</li> \r\n                    <li>Rating: {item.rating}</li>  \r\n                    <li> Submitted by: {item.name}</li>         \r\n                    </ul>\r\n                      \r\n                    </div>  \r\n                    ))}\r\n                    <h3>{msg}</h3>  \r\n                   \r\n            </div>} else{\r\n                return <div>\r\n                    \r\n                    <h3>Feedbacks:</h3>\r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.fId}>\r\n                    <ul>\r\n                    <li>Context: {item.context}</li> \r\n                    <li>Rating: {item.rating}</li>  \r\n                    <li> Submitted by: {item.name}</li>         \r\n                    </ul>\r\n                      \r\n                    </div>  \r\n                    ))}\r\n                    <h3>{this.state.msg}</h3>  \r\n                   \r\n            </div>\r\n\r\n            }\r\n        \r\n        \r\n        \r\n    }\r\n}\r\n\r\nexport default Feedback\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\VUTRANG COMPUTER\\\\Desktop\\\\onlineHospitalApp\\\\Assignment1SEPT\\\\myAppReact\\\\front_end\\\\src\\\\page\\\\Bookings.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar Bookings = /*#__PURE__*/function (_Component) {\n  _inherits(Bookings, _Component);\n\n  var _super = _createSuper(Bookings);\n\n  function Bookings() {\n    var _this;\n\n    _classCallCheck(this, Bookings);\n\n    _this = _super.call(this);\n    _this.state = {\n      items: [],\n      loggedIn: false,\n      token: '',\n      position: \"\",\n      date: \"\",\n      status: \"\",\n      doctor: \"\",\n      doctorContact: \"\",\n      bId: \"\",\n      bookingStatus: \"\",\n      msg: \"\"\n    };\n    _this.handleFilterByStatus = _this.handleFilterByStatus.bind(_assertThisInitialized(_this));\n    _this.handleFilterByDate = _this.handleFilterByDate.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleAssign = _this.handleAssign.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Bookings, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //Get the log in status and the current user\n      axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status').then(function (response) {\n        _this2.setState({\n          loggedIn: response.data.loggedIn,\n          token: response.data.token\n        });\n\n        console.log(_this2.state); //Get the booking history of the user\n\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings', {\n          headers: {\n            'Authorization': \"\".concat(_this2.state.token)\n          }\n        }).then(function (response) {\n          _this2.setState({\n            items: response.data.appointmentList\n          });\n\n          console.log(_this2.state); //Get the position of the user\n\n          axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account', {\n            headers: {\n              'Authorization': \"\".concat(_this2.state.token)\n            }\n          }).then(function (response) {\n            _this2.setState({\n              position: response.data.accountInfo.position\n            });\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    } //Filter by date for manager\n\n  }, {\n    key: \"handleFilterByDate\",\n    value: function handleFilterByDate(event) {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          token = _this$state.token,\n          date = _this$state.date;\n      axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date', {\n        date: date\n      }, {\n        headers: {\n          \"Authorization\": \"\".concat(token)\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        _this3.setState({\n          items: res.data.bookingsList\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this3.setState({\n          msg: \"Something went wrong! please try again!\"\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleFilterByStatus\",\n    value: function handleFilterByStatus(event) {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          token = _this$state2.token,\n          status = _this$state2.status;\n      axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status', {\n        status: status\n      }, {\n        headers: {\n          \"Authorization\": \"\".concat(token)\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        _this4.setState({\n          items: res.data.bookingsList\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this4.setState({\n          msg: \"Something went wrong! please try again!\"\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleAssign\",\n    value: function handleAssign(event) {\n      var _this5 = this;\n\n      var _this$state3 = this.state,\n          bId = _this$state3.bId,\n          bookingStatus = _this$state3.bookingStatus,\n          doctor = _this$state3.doctor,\n          doctorContact = _this$state3.doctorContact;\n      axios.put('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Booking', {\n        doctor: doctor,\n        doctorContact: doctorContact,\n        status: bookingStatus\n      }, {\n        params: {\n          bId: bId\n        },\n        headers: {\n          'Authorization': \"\".concat(this.state.token)\n        }\n      }).then(function (res) {\n        _this5.setState({\n          msg: res.data.message\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$state4 = this.state,\n          loggedIn = _this$state4.loggedIn,\n          items = _this$state4.items,\n          position = _this$state4.position; //If there is no booking  in booking  history, show a message\n\n      if (loggedIn && items.length == 0) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }\n        }, \"Your booking history is empty!\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }\n        }, \"You can book an appointment in Book\"));\n      } else {\n        //If the user is a manager, show the filters\n        if (position === \"Manager\") {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"h3\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }\n          }, \"Your appointment history:\"), /*#__PURE__*/React.createElement(\"form\", {\n            onSubmit: this.handleFilterByDate,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 21\n            }\n          }, \"Filter by date:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"date\",\n            placeholder: \"DD/MM/YYYY\",\n            value: this.state.date,\n            onChange: this.handleChange,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 21\n            }\n          }), \" \", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"submit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 24\n            }\n          }, \"Search\")), /*#__PURE__*/React.createElement(\"form\", {\n            onSubmit: this.handleFilterByStatus,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 21\n            }\n          }, \"Filter by status:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"status\",\n            placeholder: \"Accepted/Declined/Pending\",\n            value: this.state.status,\n            onChange: this.handleChange,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 21\n            }\n          }), \" \", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"submit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 24\n            }\n          }, \"Search\")), /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(\"h3\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 23\n            }\n          }, \"Assign Form\"), /*#__PURE__*/React.createElement(\"form\", {\n            onSubmit: this.handleAssign,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 21\n            }\n          }, \"Appointment ID:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"bId\",\n            onChange: this.handleChange,\n            required: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 21\n            }\n          }), /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 21\n            }\n          }), \"Status:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"bookingStatus\",\n            value: this.state.bookingStatus,\n            onChange: this.handleChange,\n            required: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 21\n            }\n          }), /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 21\n            }\n          }), \"Doctor:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"doctor\",\n            value: this.state.doctor,\n            onChange: this.handleChange,\n            required: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }\n          }), /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 21\n            }\n          }), \"Doctor contact info:\", /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"doctorContact\",\n            value: this.state.doctorContact,\n            onChange: this.handleChange,\n            required: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 21\n            }\n          }), /*#__PURE__*/React.createElement(\"button\", {\n            type: \"submit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 21\n            }\n          }, \"Assign\")), items.map(function (item) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"card\",\n              key: item.bId,\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 21\n              }\n            }, \"Service: \", item.service), /*#__PURE__*/React.createElement(\"ul\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 21\n              }\n            }, \"ID: \", item.bId), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }\n            }, \"Time: \", item.time, \" \", item.date), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 21\n              }\n            }, \"Status: \", item.status), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 21\n              }\n            }, \"Doctor: \", item.doctor), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }\n            }, \"Base fee: \", item.baseFee), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }\n            }, \"Doctor contact: \", item.doctorContact)));\n          }), /*#__PURE__*/React.createElement(\"h3\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 21\n            }\n          }, this.state.msg)));\n        } else {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 24\n            }\n          }, items.map(function (item) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"card\",\n              key: item.bId,\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 21\n              }\n            }, \"Service: \", item.service), /*#__PURE__*/React.createElement(\"ul\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 21\n              }\n            }, \"Time: \", item.time, \" \", item.date), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }\n            }, \"Status: \", item.status), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 21\n              }\n            }, \"Doctor: \", item.doctor), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }\n            }, \"Base fee: \", item.baseFee), /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }\n            }, \"Doctor contact: \", item.doctorContact)), /*#__PURE__*/React.createElement(\"h3\", {\n              __self: _this6,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }\n            }, _this6.state.msg));\n          }));\n        }\n      }\n    }\n  }]);\n\n  return Bookings;\n}(Component);\n\nexport default Bookings;","map":{"version":3,"sources":["C:/Users/VUTRANG COMPUTER/Desktop/onlineHospitalApp/Assignment1SEPT/myAppReact/front_end/src/page/Bookings.js"],"names":["React","Component","axios","Bookings","state","items","loggedIn","token","position","date","status","doctor","doctorContact","bId","bookingStatus","msg","handleFilterByStatus","bind","handleFilterByDate","handleChange","handleAssign","get","then","response","setState","data","console","log","headers","appointmentList","accountInfo","catch","error","event","target","name","value","post","res","bookingsList","preventDefault","put","params","message","length","map","item","service","time","baseFee"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,Q;;;;;AAEF,sBAAa;AAAA;;AAAA;;AACT;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,QAAQ,EAAC,KAFA;AAGTC,MAAAA,KAAK,EAAC,EAHG;AAITC,MAAAA,QAAQ,EAAC,EAJA;AAKTC,MAAAA,IAAI,EAAC,EALI;AAMTC,MAAAA,MAAM,EAAC,EANE;AAOTC,MAAAA,MAAM,EAAC,EAPE;AAQTC,MAAAA,aAAa,EAAC,EARL;AASTC,MAAAA,GAAG,EAAC,EATK;AAUTC,MAAAA,aAAa,EAAC,EAVL;AAWTC,MAAAA,GAAG,EAAC;AAXK,KAAb;AAaJ,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BC,IAA1B,+BAA5B;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,+BAA1B;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,+BAApB;AACA,UAAKG,YAAL,GAAoB,MAAKA,YAAL,CAAkBH,IAAlB,+BAApB;AAlBa;AAmBZ;;;;wCAEkB;AAAA;;AACnB;AACAf,MAAAA,KAAK,CAACmB,GAAN,CAAU,mFAAV,EACCC,IADD,CACM,UAAAC,QAAQ,EAAG;AACb,QAAA,MAAI,CAACC,QAAL,CAAc;AACVlB,UAAAA,QAAQ,EAACiB,QAAQ,CAACE,IAAT,CAAcnB,QADb;AAEVC,UAAAA,KAAK,EAACgB,QAAQ,CAACE,IAAT,CAAclB;AAFV,SAAd;;AAIAmB,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACvB,KAAjB,EALa,CAMb;;AACAF,QAAAA,KAAK,CAACmB,GAAN,CAAU,qFAAV,EAAgG;AAC5FO,UAAAA,OAAO,EAAC;AACJ,uCAAmB,MAAI,CAACxB,KAAL,CAAWG,KAA9B;AADI;AADoF,SAAhG,EAKHe,IALG,CAKE,UAAAC,QAAQ,EAAG;AAEb,UAAA,MAAI,CAACC,QAAL,CAAc;AACVnB,YAAAA,KAAK,EAAEkB,QAAQ,CAACE,IAAT,CAAcI;AADX,WAAd;;AAGAH,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACvB,KAAjB,EALa,CAMb;;AACAF,UAAAA,KAAK,CAACmB,GAAN,CAAU,oFAAV,EAA+F;AAC3FO,YAAAA,OAAO,EAAC;AACJ,yCAAmB,MAAI,CAACxB,KAAL,CAAWG,KAA9B;AADI;AADmF,WAA/F,EAKHe,IALG,CAKE,UAAAC,QAAQ,EAAG;AACb,YAAA,MAAI,CAACC,QAAL,CAAc;AACVhB,cAAAA,QAAQ,EAACe,QAAQ,CAACE,IAAT,CAAcK,WAAd,CAA0BtB;AADzB,aAAd;AAGH,WATG,EAUHuB,KAVG,CAUG,UAAAC,KAAK,EAAG;AACXN,YAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,WAZG;AAaH,SAzBG,EA0BHD,KA1BG,CA0BG,UAAAC,KAAK,EAAG;AACXN,UAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,SA5BG;AA6BH,OArCD,EAsCCD,KAtCD,CAsCO,UAAAC,KAAK,EAAG;AACXN,QAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,OAxCD;AAyCC;;;iCAEYC,K,EAAO;AACpB,WAAKT,QAAL,CAAc;AACV,SAACS,KAAK,CAACC,MAAN,CAAaC,IAAd,GAAqBF,KAAK,CAACC,MAAN,CAAaE;AADxB,OAAd;AAGC,K,CACD;;;;uCACmBH,K,EAAO;AAAA;;AAAA,wBACC,KAAK7B,KADN;AAAA,UACdG,KADc,eACdA,KADc;AAAA,UACPE,IADO,eACPA,IADO;AAEtBP,MAAAA,KAAK,CAACmC,IAAN,CAAW,6FAAX,EAA0G;AACxG5B,QAAAA,IAAI,EAACA;AADmG,OAA1G,EAEE;AACEmB,QAAAA,OAAO,EAAC;AACJ,qCAAmBrB,KAAnB;AADI;AADV,OAFF,EAOGe,IAPH,CAOQ,UAACgB,GAAD,EAAS;AACXZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACb,IAAhB;;AACA,QAAA,MAAI,CAACD,QAAL,CAAc;AACZnB,UAAAA,KAAK,EAAEiC,GAAG,CAACb,IAAJ,CAASc;AADJ,SAAd;AAID,OAbL,EAeGR,KAfH,CAeS,UAACC,KAAD,EAAW;AAChBN,QAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;;AACA,QAAA,MAAI,CAACR,QAAL,CAAc;AACZT,UAAAA,GAAG,EAAE;AADO,SAAd;AAGD,OApBH;AAqBAkB,MAAAA,KAAK,CAACO,cAAN;AACD;;;yCACoBP,K,EAAO;AAAA;;AAAA,yBACD,KAAK7B,KADJ;AAAA,UAClBG,KADkB,gBAClBA,KADkB;AAAA,UACXG,MADW,gBACXA,MADW;AAE1BR,MAAAA,KAAK,CAACmC,IAAN,CAAW,+FAAX,EAA4G;AAC1G3B,QAAAA,MAAM,EAACA;AADmG,OAA5G,EAEE;AACEkB,QAAAA,OAAO,EAAC;AACJ,qCAAmBrB,KAAnB;AADI;AADV,OAFF,EAOGe,IAPH,CAOQ,UAACgB,GAAD,EAAS;AACXZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACb,IAAhB;;AACA,QAAA,MAAI,CAACD,QAAL,CAAc;AACZnB,UAAAA,KAAK,EAAEiC,GAAG,CAACb,IAAJ,CAASc;AADJ,SAAd;AAID,OAbL,EAeGR,KAfH,CAeS,UAACC,KAAD,EAAW;AAChBN,QAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;;AACA,QAAA,MAAI,CAACR,QAAL,CAAc;AACZT,UAAAA,GAAG,EAAE;AADO,SAAd;AAGD,OApBH;AAqBAkB,MAAAA,KAAK,CAACO,cAAN;AACD;;;iCACYP,K,EAAM;AAAA;;AAAA,yBACgC,KAAK7B,KADrC;AAAA,UACVS,GADU,gBACVA,GADU;AAAA,UACNC,aADM,gBACNA,aADM;AAAA,UACQH,MADR,gBACQA,MADR;AAAA,UACeC,aADf,gBACeA,aADf;AAEjBV,MAAAA,KAAK,CAACuC,GAAN,CAAU,oFAAV,EAA+F;AAC7F9B,QAAAA,MAAM,EAACA,MADsF;AAC/EC,QAAAA,aAAa,EAACA,aADiE;AAClDF,QAAAA,MAAM,EAACI;AAD2C,OAA/F,EAEE;AACA4B,QAAAA,MAAM,EAAC;AACL7B,UAAAA,GAAG,EAACA;AADC,SADP;AAIAe,QAAAA,OAAO,EAAC;AACN,qCAAmB,KAAKxB,KAAL,CAAWG,KAA9B;AADM;AAJR,OAFF,EASGe,IATH,CASQ,UAAAgB,GAAG,EAAE;AACX,QAAA,MAAI,CAACd,QAAL,CAAc;AACZT,UAAAA,GAAG,EAACuB,GAAG,CAACb,IAAJ,CAASkB;AADD,SAAd;AAED,OAZD;AAaAV,MAAAA,KAAK,CAACO,cAAN;AACD;;;6BACM;AAAA;;AAAA,yBAE4B,KAAKpC,KAFjC;AAAA,UAEAE,QAFA,gBAEAA,QAFA;AAAA,UAEUD,KAFV,gBAEUA,KAFV;AAAA,UAEgBG,QAFhB,gBAEgBA,QAFhB,EAGL;;AACA,UAAGF,QAAQ,IAAED,KAAK,CAACuC,MAAN,IAAc,CAA3B,EAA6B;AACzB,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAL,eACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADO,eAEP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAFO,CAAP;AAGH,OAJD,MAKK;AACD;AACA,YAAGpC,QAAQ,KAAG,SAAd,EAAwB;AAAC,8BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAD4B,eAExB;AAAM,YAAA,QAAQ,EAAE,KAAKU,kBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,MAFL;AAGA,YAAA,WAAW,EAAC,YAHZ;AAIA,YAAA,KAAK,EAAE,KAAKd,KAAL,CAAWK,IAJlB;AAKA,YAAA,QAAQ,EAAE,KAAKU,YALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHA,oBASG;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBATH,CAFwB,eAaxB;AAAM,YAAA,QAAQ,EAAE,KAAKH,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAGA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,QAFL;AAGA,YAAA,WAAW,EAAC,2BAHZ;AAIA,YAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWM,MAJlB;AAKA,YAAA,QAAQ,EAAE,KAAKS,YALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHA,oBASG;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBATH,CAbwB,eAyBxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEA;AAAM,YAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,KAFL;AAGA,YAAA,QAAQ,EAAE,KAAKD,YAHf;AAIA,YAAA,QAAQ,MAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHA,eASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATA,0BAWA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,eAFL;AAGA,YAAA,KAAK,EAAE,KAAKf,KAAL,CAAWU,aAHlB;AAIA,YAAA,QAAQ,EAAE,KAAKK,YAJf;AAKA,YAAA,QAAQ,MALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAXA,eAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAlBA,0BAoBA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,QAFL;AAGA,YAAA,KAAK,EAAE,KAAKf,KAAL,CAAWO,MAHlB;AAIA,YAAA,QAAQ,EAAE,KAAKQ,YAJf;AAKA,YAAA,QAAQ,MALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YApBA,eA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA3BA,uCA6BA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,IAAI,EAAC,eAFL;AAGA,YAAA,KAAK,EAAE,KAAKf,KAAL,CAAWQ,aAHlB;AAIA,YAAA,QAAQ,EAAE,KAAKO,YAJf;AAKA,YAAA,QAAQ,MALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA7BA,eAoCA;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBApCA,CAFA,EAwCCd,KAAK,CAACwC,GAAN,CAAU,UAAAC,IAAI;AAAA,gCACf;AAAK,cAAA,SAAS,EAAC,MAAf;AAAsB,cAAA,GAAG,EAAGA,IAAI,CAACjC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAciC,IAAI,CAACC,OAAnB,CAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAASD,IAAI,CAACjC,GAAd,CADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAWiC,IAAI,CAACE,IAAhB,OAAuBF,IAAI,CAACrC,IAA5B,CAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAaqC,IAAI,CAACpC,MAAlB,CAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAaoC,IAAI,CAACnC,MAAlB,CAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAemC,IAAI,CAACG,OAApB,CALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAqBH,IAAI,CAAClC,aAA1B,CANA,CAHA,CADe;AAAA,WAAd,CAxCD,eAwDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAK,KAAKR,KAAL,CAAWW,GAAhB,CAxDA,CAzBwB,CAAP;AAmFlB,SAnFP,MAmFY;AACR,8BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEFV,KAAK,CAACwC,GAAN,CAAU,UAAAC,IAAI;AAAA,gCACf;AAAK,cAAA,SAAS,EAAC,MAAf;AAAsB,cAAA,GAAG,EAAGA,IAAI,CAACjC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAciC,IAAI,CAACC,OAAnB,CADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAWD,IAAI,CAACE,IAAhB,OAAuBF,IAAI,CAACrC,IAA5B,CAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAaqC,IAAI,CAACpC,MAAlB,CAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAaoC,IAAI,CAACnC,MAAlB,CAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAemC,IAAI,CAACG,OAApB,CALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAqBH,IAAI,CAAClC,aAA1B,CANA,CAFA,eAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAK,MAAI,CAACR,KAAL,CAAWW,GAAhB,CAXA,CADe;AAAA,WAAd,CAFE,CAAP;AAmBH;AAEJ;AAEJ;;;;EAnQkBd,S;;AAqQvB,eAAeE,QAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\nclass Bookings extends Component {\r\n    \r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            items: [],\r\n            loggedIn:false,\r\n            token:'',\r\n            position:\"\",\r\n            date:\"\",\r\n            status:\"\",\r\n            doctor:\"\",\r\n            doctorContact:\"\",\r\n            bId:\"\",\r\n            bookingStatus:\"\",\r\n            msg:\"\"\r\n        }\r\n    this.handleFilterByStatus = this.handleFilterByStatus.bind(this)\r\n    this.handleFilterByDate = this.handleFilterByDate.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleAssign = this.handleAssign.bind(this)\r\n    }\r\n    \r\n    componentDidMount(){\r\n    //Get the log in status and the current user\r\n    axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/status')\r\n    .then(response=> {\r\n        this.setState({\r\n            loggedIn:response.data.loggedIn,\r\n            token:response.data.token\r\n        })\r\n        console.log(this.state)\r\n        //Get the booking history of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n    \r\n        this.setState({\r\n            items: response.data.appointmentList\r\n        })\r\n        console.log(this.state)\r\n        //Get the position of the user\r\n        axios.get('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/account',{\r\n            headers:{\r\n                'Authorization':`${this.state.token}`\r\n            }\r\n        })\r\n    .then(response=> {\r\n        this.setState({\r\n            position:response.data.accountInfo.position\r\n        })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    })\r\n    .catch(error=> {\r\n        console.log(error)\r\n    })\r\n    }\r\n\r\n    handleChange(event) {\r\n    this.setState({\r\n        [event.target.name]: event.target.value\r\n    })\r\n    }\r\n    //Filter by date for manager\r\n    handleFilterByDate(event) {\r\n        const { token, date} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-date', {\r\n          date:date\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleFilterByStatus(event) {\r\n        const { token, status} = this.state\r\n        axios.post('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Bookings-by-status', {\r\n          status:status\r\n        },{\r\n            headers:{\r\n                \"Authorization\":`${token}`\r\n            }\r\n        })\r\n          .then((res) => {\r\n              console.log(res.data)\r\n              this.setState({\r\n                items: res.data.bookingsList\r\n              })\r\n              \r\n            }\r\n          )\r\n          .catch((error) => {\r\n            console.log(error)\r\n            this.setState({\r\n              msg: \"Something went wrong! please try again!\"\r\n            })\r\n          });\r\n        event.preventDefault()\r\n      }\r\n      handleAssign(event){\r\n        const {bId,bookingStatus,doctor,doctorContact} = this.state\r\n        axios.put('https://us-central1-online-clinic-booking-system.cloudfunctions.net/AyPiAI/Booking',{\r\n          doctor:doctor,doctorContact:doctorContact, status:bookingStatus\r\n        },{\r\n          params:{\r\n            bId:bId\r\n          },\r\n          headers:{\r\n            'Authorization':`${this.state.token}`\r\n          }\r\n        }).then(res=>{\r\n          this.setState({\r\n            msg:res.data.message})\r\n        })\r\n        event.preventDefault()\r\n      }\r\n    render() {\r\n        \r\n        var {loggedIn, items,position} = this.state  \r\n        //If there is no booking  in booking  history, show a message\r\n        if(loggedIn&&items.length==0){\r\n            return <div><h3>Your booking history is empty!</h3>\r\n            <br></br>\r\n            <h3>You can book an appointment in Book</h3></div>\r\n        }\r\n        else {\r\n            //If the user is a manager, show the filters\r\n            if(position===\"Manager\"){return <div>\r\n                <h3>Your appointment history:</h3>\r\n                    <form onSubmit={this.handleFilterByDate} >\r\n\r\n                    Filter by date: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"date\"\r\n                    placeholder=\"DD/MM/YYYY\"\r\n                    value={this.state.date}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n                    <form onSubmit={this.handleFilterByStatus} >\r\n\r\n                    Filter by status: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"status\"\r\n                    placeholder=\"Accepted/Declined/Pending\"\r\n                    value={this.state.status}\r\n                    onChange={this.handleChange}\r\n                    /> <button type=\"submit\">Search</button>\r\n                    </form>\r\n\r\n                    <ul>\r\n                      <h3>Assign Form</h3>\r\n                    <form onSubmit={this.handleAssign} >\r\n\r\n                    Appointment ID:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"bId\"\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Status:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"bookingStatus\"\r\n                    value={this.state.bookingStatus}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor: \r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctor\"\r\n                    value={this.state.doctor}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <br></br>\r\n                    Doctor contact info:\r\n                    <input\r\n                    type=\"text\"\r\n                    name=\"doctorContact\"\r\n                    value={this.state.doctorContact}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    /> \r\n                    <button type=\"submit\">Assign</button>\r\n                    </form>\r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>\r\n                      \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                    <li>ID: {item.bId}</li>  \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee}</li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    \r\n                    </ul>\r\n                      \r\n                    </div>  \r\n                    ))}\r\n                    <h3>{this.state.msg}</h3>  \r\n                    </ul>\r\n            </div>} else{\r\n                return <div>\r\n                    \r\n                    {items.map(item=>(\r\n                    <div className=\"card\" key ={item.bId}>  \r\n                    <h3>Service: {item.service}</h3> \r\n                    <ul>\r\n                      \r\n                    <li>Time: {item.time} {item.date}</li>\r\n                    <li>Status: {item.status}</li>\r\n                    <li>Doctor: {item.doctor}</li>\r\n                    <li>Base fee: {item.baseFee}</li>\r\n                    <li>Doctor contact: {item.doctorContact}</li>\r\n                    </ul>\r\n                \r\n                    <h3>{this.state.msg}</h3> \r\n                </div>\r\n                  ))}\r\n                </div>\r\n\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n}\r\nexport default Bookings\r\n"]},"metadata":{},"sourceType":"module"}